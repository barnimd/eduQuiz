<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduQuiz</title>
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <header>
        <div class="left-section">
            <div class="logo">
                <a href="{{ url_for('home') }}">eduQuiz</a>
            </div>
            <div class="dropdown">
                <button class="dropbtn">Quiz Kategori ‚ñº</button>
                <div class="dropdown-content">
                    <a href="/quiz/math">Matematika</a>
                    <a href="/quiz/animals">Tebak Hewan</a>
                    <a href="/quiz/places">Tebak Lokasi</a>
                </div>
            </div>
        </div>

        <div class="right-section">
            {% if session.get('username') %}
            <div class="auth-links">
                <span>Hi, {{ session['username'] }}</span>
                <a href="{{ url_for('logout') }}" class="btn-auth logout">Logout</a>
            </div>
            {% else %}
            <div class="auth-links">
                <a href="{{ url_for('login') }}" class="btn-auth">Login</a>
                <a href="{{ url_for('signup') }}" class="btn-auth">Signup</a>
            </div>
            {% endif %}
        </div>
    </header>





    <main class="homepage-container">

        <div class="carousel">
            <div class="carousel-track">
                <div class="slide active">
                    <img src="/static/img/geoguess.jpeg" alt="GeoGuess">
                    <a href="/quiz/places" class="quiz-button">Mulai Quiz</a>
                </div>
                <div class="slide next">
                    <img src="/static/img/math.jpeg" alt="Math">
                    <a href="/quiz/math" class="quiz-button">Mulai Quiz</a>
                </div>
                <div class="slide">
                    <img src="/static/img/zoo.jpeg" alt="Zoo">
                    <a href="/quiz/animals" class="quiz-button">Mulai Quiz</a>
                </div>
            </div>


            <div class="buttons">
                <button id="prevBtn">&#10094;</button>
                <button id="nextBtn">&#10095;</button>
            </div>
        </div>

        <div class="bottom-section">
            <div class="leaderboard-carousel">
                <div class="carousel-track-leaderboard">
                    <!-- Slide 1 - Math -->
                    <div class="slide-leaderboard active">
                        <h3>üèÜ Leaderboard - Matematika</h3>
                        <ol>
                            {% for entry in leaderboard_math %}
                                <li>{{ entry.username }} - {{ entry.score }}%</li>
                            {% endfor %}
                            {% if extra_math %}
                                <li style="color: gray;">{{ extra_math.username }} - {{ extra_math.score }}%</li>
                            {% endif %}
                        </ol>
                    </div>

                    <!-- Slide 2 - Animals -->
                    <div class="slide-leaderboard">
                        <h3>üêæ Leaderboard - Tebak Hewan</h3>
                        <ol>
                            {% for entry in leaderboard_animals %}
                                <li>{{ entry.username }} - {{ entry.score }}%</li>
                            {% endfor %}
                            {% if extra_animals %}
                                <li style="color: gray;">{{ extra_animals.username }} - {{ extra_animals.score }}%</li>
                            {% endif %}
                        </ol>
                    </div>

                    <!-- Slide 3 - Places -->
                    <div class="slide-leaderboard">
                        <h3>üåç Leaderboard - Lokasi</h3>
                        <ol>
                            {% for entry in leaderboard_places %}
                                <li>{{ entry.username }} - {{ entry.score }}%</li>
                            {% endfor %}
                            {% if extra_places %}
                                <li style="color: gray;">{{ extra_places.username }} - {{ extra_places.score }}%</li>
                            {% endif %}
                        </ol>
                    </div>
                </div>
            
                <div class="buttons-leaderboard">
                    <button id="prevLeaderboard">&#10094;</button>
                    <button id="nextLeaderboard">&#10095;</button>
                </div>
            </div>


            {% if stats %}
            <div class="user-stats">
                <h3>üìä Statistik Kamu</h3>
                <ul>
                    <li>Total kuis yang dikerjakan: {{ stats.total_quiz }}</li>
                    <li>Kategori favorit: {{ stats.favorite_category | capitalize }}</li>
                    <li>Rata-rata skor: {{ stats.average_score }}%</li>
                    <li>Skor tertinggi: {{ stats.highest_score }}% ({{ stats.highest_category | capitalize }})</li>
                </ul>
            </div>
            {% endif %}

        </div>
    </main>
<script>
    const slidesleaderboard = document.querySelectorAll('.slide-leaderboard');
    const nextleaderboardBtn = document.getElementById('nextLeaderboard');
    const prevleaderboardBtn = document.getElementById('prevLeaderboard');

    let currentIndexleaderboard = 0;

    function updateSlide() {
        slidesleaderboard.forEach((slidesleaderboard, index) => {
            slidesleaderboard.classList.remove('active');
            if (index === currentIndexleaderboard) {
                slidesleaderboard.classList.add('active');
            }
        });
    }

    nextleaderboardBtn.addEventListener('click', () => {
        currentIndexleaderboard = (currentIndexleaderboard + 1) % slides.length;
        updateSlide();
    });

    prevleaderboardBtn.addEventListener('click', () => {
        currentIndexleaderboard = (currentIndexleaderboard - 1 + slides.length) % slides.length;
        updateSlide();
    });

    // Set awal
    updateSlide();
</script>

</body>

</html>